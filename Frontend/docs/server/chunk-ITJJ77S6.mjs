import './polyfills.server.mjs';
import{a as pe,d as ce}from"./chunk-HYBNWHWX.mjs";import{B as Me,D as Ie,E as W,F as B,G as Ee,c as ge,g as fe,i as he,j as k,k as A,l as P,m as L,n as O,o as V,q as ye,r as ve,s as we,v as j,w as Se,x as be,y as Ce}from"./chunk-H5S6FPU3.mjs";import{d as se,e as ae,i as le,j as de,l as me,n as ue,p as F,q as R,r as _,s as U}from"./chunk-7XJUWC2E.mjs";import{Ab as T,Bb as d,Eb as v,Fb as w,Gb as S,Jb as N,Pa as c,Q as J,Qa as y,Ra as K,Sa as Q,T as q,U as g,Ua as ee,Wa as te,Xa as ie,Z as X,ca as f,da as h,db as I,fa as Y,fb as u,hc as re,ka as C,kb as s,la as M,lb as a,mb as E,pb as ne,qc as oe,rb as x,sc as D,xa as Z}from"./chunk-3NEGXMRX.mjs";function Ve(i,e){i&1&&(s(0,"div",17),d(1," Invalid username or password. "),a())}var Te=(()=>{let e=class e{constructor(t,n,r){this.authService=t,this.router=n,this.toastr=r,this.email="",this.password="",this.loginError=!1}ngOnInit(){if(typeof window<"u"&&window.localStorage){let t=localStorage.getItem("token"),n=localStorage.getItem("userRole");t&&(n==="ADMIN"?this.router.navigate(["/admin-dashboard/dashboard"]):n==="SERVICEADVISOR"&&this.router.navigate(["/advisor-dashboard/advisorDashboard/advisorvehicle"]))}}login(){this.authService.login(this.email,this.password).subscribe(t=>{console.log("done"),localStorage.setItem("token",t.jwt),localStorage.setItem("userId",t.userId),localStorage.setItem("userRole",t.role),localStorage.setItem("userName",t.name),localStorage.setItem("userEmail",t.email),console.log(t.jwt,t.role),console.log(t);let n=t.role;n==="ADMIN"?(this.toastr.success("Login successfully",""),this.router.navigate(["/admin-dashboard/dashboard"]),console.log("admin")):n==="SERVICEADVISOR"?(this.toastr.success("Login successfully",""),this.router.navigate(["/advisor-dashboard/advisorDashboard/advisorvehicle"]),console.log("service")):(console.error("Invalid role received:",n),this.toastr.error("Invalid role received","Login Error")),this.loginError=!1})}};e.\u0275fac=function(n){return new(n||e)(y(W),y(F),y(B))},e.\u0275cmp=f({type:e,selectors:[["app-login"]],decls:23,vars:3,consts:[[1,"container-fluid","page-body-wrapper","full-page-wrapper"],[1,"content-wrapper","d-flex","align-items-center","auth","px-0"],[1,"row","w-100","mx-0"],[1,"col-lg-5","mx-auto"],[1,"auth-form-light","text-left","py-5","px-4","px-sm-5"],[1,"text-center"],[3,"ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"form-check","d-flex","justify-content-between","align-items-center","mb-4"],[1,"form-check-label","text-muted"],["routerLink","/register","routerLinkActive","active",1,"auth-link","text-black"],["type","submit",1,"text-center","btn","btn-primary"],["role","alert",1,"alert","alert-danger"]],template:function(n,r){n&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),d(6,"User Login"),a(),s(7,"form",6),x("ngSubmit",function(){return r.login()}),s(8,"div",7)(9,"label",8),d(10,"Email address"),a(),s(11,"input",9),S("ngModelChange",function(m){return w(r.email,m)||(r.email=m),m}),a()(),s(12,"div",7)(13,"label",10),d(14,"Password"),a(),s(15,"input",11),S("ngModelChange",function(m){return w(r.password,m)||(r.password=m),m}),a()(),I(16,Ve,2,0,"div",12),s(17,"div",13),E(18,"div",14),s(19,"a",15),d(20,"Register"),a()(),s(21,"button",16),d(22,"Login"),a()()()()()()()),n&2&&(c(11),v("ngModel",r.email),c(4),v("ngModel",r.password),c(),u("ngIf",r.loginError))},dependencies:[D,R,_,V,k,A,P,j,O,L]});let i=e;return i})();var Ne=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=f({type:e,selectors:[["app-forgetpassword"]],decls:2,vars:0,template:function(n,r){n&1&&(s(0,"p"),d(1,"forgetpassword works!"),a())}});let i=e;return i})();var $=i=>({"has-error":i});function je(i,e){i&1&&(s(0,"div",30),d(1," Name is required. "),a())}function We(i,e){i&1&&(s(0,"div",30),d(1," Please enter a valid email address. "),a())}function Be(i,e){i&1&&(s(0,"div",30),d(1," Password must be at least 8 characters long and contain at least one number, one uppercase letter, and one special character. "),a())}var De=(()=>{let e=class e{constructor(t,n,r){this.authService=t,this.router=n,this.toastr=r}register(){this.authService.register(this.name,this.email,this.password,this.role).subscribe(t=>{console.log("Registration successful!",t),this.toastr.success("","Registration successful"),this.router.navigate(["/login"])},t=>{console.error("Registration failed:",t)})}};e.\u0275fac=function(n){return new(n||e)(y(W),y(F),y(B))},e.\u0275cmp=f({type:e,selectors:[["app-register"]],decls:44,vars:17,consts:[["registrationForm","ngForm"],["nameInput","ngModel"],["emailInput","ngModel"],["passwordInput","ngModel"],[1,"container-fluid","page-body-wrapper","full-page-wrapper"],[1,"content-wrapper","d-flex","align-items-center","auth","px-0"],[1,"row","w-100","mx-0"],[1,"col-lg-5","mx-auto"],[1,"auth-form-light","text-left","py-5","px-4","px-sm-5"],[1,"text-center"],[3,"ngSubmit"],[1,"mb-3",3,"ngClass"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-danger",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","","email","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","","minlength","8",1,"form-control",3,"ngModelChange","ngModel"],[1,"mb-3"],["for","role",1,"form-label"],["id","role","name","role","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","ADMIN"],["value","SERVICEADVISOR"],[1,"form-check","d-flex","justify-content-between","align-items-center","mb-4"],[1,"form-check-label","text-muted"],["for","rememberMe",1,"form-check-label"],["routerLink","/login","routerLinkActive","active",1,"auth-link","text-black"],["type","submit",1,"text-center","btn","btn-primary",3,"disabled"],[1,"alert","alert-danger"]],template:function(n,r){if(n&1){let l=ne();s(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"h2",9),d(6,"User Registration"),a(),s(7,"form",10,0),x("ngSubmit",function(){return C(l),M(r.register())}),s(9,"div",11)(10,"label",12),d(11,"Name"),a(),s(12,"input",13,1),S("ngModelChange",function(p){return C(l),w(r.name,p)||(r.name=p),M(p)}),a(),I(14,je,2,0,"div",14),a(),s(15,"div",11)(16,"label",15),d(17,"Email address"),a(),s(18,"input",16,2),S("ngModelChange",function(p){return C(l),w(r.email,p)||(r.email=p),M(p)}),a(),I(20,We,2,0,"div",14),a(),s(21,"div",11)(22,"label",17),d(23,"Password"),a(),s(24,"input",18,3),S("ngModelChange",function(p){return C(l),w(r.password,p)||(r.password=p),M(p)}),a(),I(26,Be,2,0,"div",14),a(),s(27,"div",19)(28,"label",20),d(29,"Role"),a(),s(30,"select",21),S("ngModelChange",function(p){return C(l),w(r.role,p)||(r.role=p),M(p)}),s(31,"option",22),d(32,"Select Role"),a(),s(33,"option",23),d(34,"Admin"),a(),s(35,"option",24),d(36,"Service Advisor"),a()()(),s(37,"div",25)(38,"div",26),E(39,"label",27),a(),s(40,"a",28),d(41,"Login"),a()(),s(42,"button",29),d(43,"Register"),a()()()()()()()}if(n&2){let l=T(8),m=T(13),p=T(19),G=T(25);c(9),u("ngClass",N(11,$,l.submitted&&!m.valid)),c(3),v("ngModel",r.name),c(2),u("ngIf",l.submitted&&m.invalid),c(),u("ngClass",N(13,$,l.submitted&&!p.valid)),c(3),v("ngModel",r.email),c(2),u("ngIf",l.submitted&&p.invalid),c(),u("ngClass",N(15,$,l.submitted&&!G.valid)),c(3),v("ngModel",r.password),c(2),u("ngIf",l.submitted&&G.invalid),c(4),v("ngModel",r.role),c(12),u("disabled",l.invalid)}},dependencies:[oe,D,R,_,V,ve,we,k,ye,A,P,j,be,Se,O,L],styles:["input.ng-invalid[_ngcontent-%COMP%]{border-color:red}"]});let i=e;return i})();var He=[{path:"login",component:Te},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"forgetpassword",component:Ne},{path:"admin-dashboard",loadChildren:()=>import("./chunk-FTS45AKA.mjs").then(i=>i.AdminModule)},{path:"advisor-dashboard",loadChildren:()=>import("./chunk-CZA3BIWL.mjs").then(i=>i.AdvisorModule)},{path:"register",component:De}],Fe=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=h({type:e}),e.\u0275inj=g({imports:[U.forRoot(He),U]});let i=e;return i})();var H=(()=>{let e=class e{constructor(){this.title="Frontend"}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=f({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&E(0,"router-outlet")},dependencies:[ue]});let i=e;return i})();var qe="@",Ue=(()=>{let e=class e{constructor(t,n,r,l,m){this.doc=t,this.delegate=n,this.zone=r,this.animationType=l,this.moduleImpl=m,this._rendererFactoryPromise=null,this.scheduler=X(Q,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-EE5C3YIE.mjs")).catch(n=>{throw new J(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:r})=>{this._engine=n(this.animationType,this.doc,this.scheduler);let l=new r(this.delegate,this._engine,this.zone);return this.delegate=l,l})}createRenderer(t,n){let r=this.delegate.createRenderer(t,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let l=new z(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(m=>{let p=m.createRenderer(t,n);l.use(p)}).catch(m=>{l.use(r)}),l}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(n){K()},e.\u0275prov=q({token:e,factory:e.\u0275fac});let i=e;return i})(),z=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let o of this.replay)o(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,o){return this.delegate.createElement(e,o)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,o){this.delegate.appendChild(e,o)}insertBefore(e,o,t,n){this.delegate.insertBefore(e,o,t,n)}removeChild(e,o,t){this.delegate.removeChild(e,o,t)}selectRootElement(e,o){return this.delegate.selectRootElement(e,o)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,o,t,n){this.delegate.setAttribute(e,o,t,n)}removeAttribute(e,o,t){this.delegate.removeAttribute(e,o,t)}addClass(e,o){this.delegate.addClass(e,o)}removeClass(e,o){this.delegate.removeClass(e,o)}setStyle(e,o,t,n){this.delegate.setStyle(e,o,t,n)}removeStyle(e,o,t){this.delegate.removeStyle(e,o,t)}setProperty(e,o,t){this.shouldReplay(o)&&this.replay.push(n=>n.setProperty(e,o,t)),this.delegate.setProperty(e,o,t)}setValue(e,o){this.delegate.setValue(e,o)}listen(e,o,t){return this.shouldReplay(o)&&this.replay.push(n=>n.listen(e,o,t)),this.delegate.listen(e,o,t)}shouldReplay(e){return this.replay!==null&&e.startsWith(qe)}};function Re(i="animations"){return te("NgAsyncAnimations"),Y([{provide:ee,useFactory:(e,o,t)=>new Ue(e,o,t,i),deps:[re,le,ie]},{provide:Z,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var _e=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=h({type:i});static \u0275inj=g({})}return i})();var ke=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=h({type:e,bootstrap:[H]}),e.\u0275inj=g({providers:[me(),Re(),se()],imports:[de,Fe,ae,Ce,pe,Ee.forRoot({timeOut:1500,positionClass:"toast-bottom-right",preventDuplicates:!0}),ge,fe,Me,he,Ie,_e]});let i=e;return i})();var $e=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=h({type:e,bootstrap:[H]}),e.\u0275inj=g({imports:[ke,ce]});let i=e;return i})();export{$e as a};
